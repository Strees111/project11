# Aviasales

Разработать информационно-справочную систему для поиска и покупки авиабилетов. 

Программа взаимодействует с пользователем через стандартный ввод и вывод (потоки stdin и stdout).

База данных позволяет хранить сведения об авиабилетах: номер рейса, аэропорт вылета, аэропорт прибытия, дата и время вылета, дата и время прилёта, количество билетов, стоимость авиабилета. 
Здесь:
* номер рейса — строка не более 7 символов (не содержит знаков `,;"` и пробелов);
* аэропорт вылета — код аэропорта, строка не более 3 символов (не содержит знаков `,;"` и пробелов);
* аэропорт прибытия — код аэропорта, строка не более 3 символов (не содержит знаков `,;"` и пробелов);
* количество билетов — целое число;
* стоимость авиабилета — вещественное число. 

Для каждой записи автоматически добавляется уникальный номер записи (у первой добавленной записи в базе должен быть номер 1).

Должны обрабатываться следующие команды:
* `load имя_файла_с_БД` — чтение базы данных из файла;
* `save имя_файла_с_БД` — запись базы данных в файл;
* `add номер рейса, аэропорт вылета, аэропорт прибытия, дата и время вылета, дата и время прилёта, количество билетов, цена` — добавление авиабилетов;
* `delete ID` — удаление записи по её уникальному номеру ID;
* `clear` — удаление всех записей из базы данных, у которых количество билетов равно 0;
* `print` — вывод всего списка авиабилетов, отсортированного по возрастанию даты и времени вылета, номеру рейса и цене;
* `schedule аэропорт_вылета дата_вылета` — список рейсов отправляющихся из заданного аэропорта в определеную дату, отсортированных по времени вылета;
* `from аэропорт_вылета to аэропорт_прилёта on дата_вылета` — список билетов (количество больше 0) на текущую дату, отсортированный по возрастанию цены (при равенстве цен упорядоченные по возрастанию времени вылета);
* `find аэропорт_вылета to аэропорт_прилёта` — самый дешёвый авиаперелет, возможно с одной пересадкой (количество билетов должно быть больше 0);
* `buy номер_рейса дата_вылета` — купить самый дешёвый билет на заданный номер рейса на заданную дату (кол-во билетов в базе должно уменьшиться на единицу);
* `export имя_файла` — вывод всего списка авиабилетов (отсортированного по возрастанию даты и времени вылета, номеру рейса и цене) в текстовый файл;
* `quit` — завершение работы.

Приглашение ко вводу команд (строка, которая отображается слева от каждой команды, которая будет вводиться в терминале) имеет вид `> ` (символ больше и пробел).

## Добавление авиабилетов
Добавление авиабилетов осуществляется с помощью команды `add`. Общий формат команды: 
```add номер_рейса, аэропорт_вылета, аэропорт_прибытия, дата_и_время_вылета, дата_и_время_прилёта, количество_билетов, цена```
* `дата_и_время_*` вводится в формате `ДД.ММ.ГГГГ чч:мм`, где 
  - `ДД` — день в виде числа от 1 до 31 или от 01 до 31;
  - `MM` — месяц в виде числа от 1 до 12 или от 01 до 12;
  - `ГГГГ` — год в виде числа от 2000 до 9999;
  - `чч` — часов в виде числа от 0 до 23 или от 01 до 23;
  - `мм` — минут в виде числа от 0 до 59 или от 01 до 59;
* `номер_рейса` — строка не более 7 символов (при вводе не будет содержать знаков `,;"` и пробелов);
* `аэропорт_вылета` — строка не более 3 символов (при вводе не будет содержать знаков `,;"` и пробелов);
* `аэропорт_прибытия` — строка не более 3 символов (при вводе не будет содержать знаков `,;"` и пробелов);
* `количество_билетов` — целое число;
* `стоимость_авиабилета` — вещественное число. 

### Пример команды
Добавление 5 билетов из Пекина в Москву на рейс CA-909 за 80499 у.е.:
```add CA-909, PKX, SVO, 19.02.2024 8:40, 19.02.2024 17:00, 5, 80499```


## Обработка ошибок ввода
Если пользователь ввёл неизвестную команду, то программа должна об этом сообщить, выведя строку `Unknown command: CO M M A N D`, где `C O M M A N D` — это та команда, которую ввёл пользователь. Командой считается первое слово в строке (до пробела или конца строки).

Если пользователь ввёл дату в неверном формате там, где она ожидалась, то программа должна напечатать `Wrong date format: D A T E`, где `D A T E` — это то, что пользователь ввёл вместо даты.

Если формат даты верный, но сама дата неверна, то программа должна напечатать более конкретную проблему: `Month value is invalid: M O N T H`, где `M O N T H` — это неверный номер месяца, например, 13 или 0. `Day value is invalid: D A Y`, где `D A Y` — это неверный номер дня в месяце, например, 32 или 0.

Если пользователь ввёл время в неверном формате там, где оно ожидалась, то программа должна напечатать `Wrong time format: T I M E`, где `T I M E` — это то, что пользователь ввёл вместо времени.

Если формат времени верный, но само время неверно, то программа должна напечатать более конкретную проблему: `Time value is invalid: T I M E`, где `T I M E` — это введенное пользователем время, например, `25:01` или `10:76`.

Если время прилета раньше, чем время вылета, то программа должна об этом сообщить, выведя строку `Wrong arrival time`.

В остальных случаях, если пользователь ввёл неправильную команду, то выводить строку `Unknown command`. 

Если при чтении базы данных из файла пользователь указал несуществующий файл, то вывести строку `Can not open database`.

Если при записи базы данных в файл пользователь неправильно указал имя файла, то вывести строку `Can not write to file`.

## Формат вывода
При выводе списков элементы записи разделяются запятыми. 
* Формат вывода записи для команды `print`: `ID, номер рейса, аэропорт вылета, аэропорт прибытия, дата и время вылета, дата и время прилёта, количество билетов, цена`.
* Формат вывода записи для команды `schedule`: `номер рейса, аэропорт прибытия, время вылета`.
* Формат вывода записи для команд `from` и `find`: `номер рейса, аэропорт вылета, аэропорт прибытия, дата и время вылета, дата и время прилёта, количество билетов, цена`.
* Формат вывода записи для команды `export`: `номер рейса, аэропорт вылета, аэропорт прибытия, дата и время вылета, дата и время прилёта, количество билетов, цена`.

Формат вывода даты и времени: `ГГГГ.ММ.ДД чч:мм`, где 
* `ДД` — день в виде числа от 01 до 31;
* `MM` — месяц в виде числа от 01 до 12;
* `ГГГГ` — год в виде числа от 0 до 9999;
* `чч` — часов в виде числа от 01 до 23;
* `мм` — минут в виде числа от 01 до 59.

Если при выполнении команд `from` и `find` не найдено никаких билетов, то вывести `no tickets`.

При покупке билета для команды `buy номер_рейса дата_вылета` уменьшить кол-во доступных билетов в базе на единицу, вывести цену купленного билета. Если билетов на заданный рейс не было, то вывести `no tickets`.

Формат вывода цены: два знака после запятой.

## Поиск
Поиск должен быть регистронезависимым (например, одинаковыми являются названия аэропортов `LED`, `Led`, `led`).

## Требования к реализации
Программа не должна использовать контейнеры STL (std::vector, std::string и т. д.). 
